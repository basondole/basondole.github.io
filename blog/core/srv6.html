<!DOCTYPE html>
<html lang="en-US" prefix="og: http://ogp.me/ns#" class="no-js no-svg">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>

<title>basondole.io &#8211; Professional network design and development</title>

<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel='dns-prefetch' href='//www.google.com' />
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link crossorigin="anonymous" rel='stylesheet' id='alia-fonts-css'  href='https://fonts.googleapis.com/css?family=Roboto%3A400%2C400i%2C700%2C700i%7CPoppins%3A400%2C400i%2C700%2C700i&#038;subset=latin%2Clatin-ext' type='text/css' media='all' />


<link rel='stylesheet' id='wp-block-library-css'  href='../../karneliuk/style.min.5.3.2.css' type='text/css' media='all' />
<link rel='stylesheet' id='github-embed-css'  href='../../karneliuk/github-embed.5.3.2.css' type='text/css' media='all' />
<link rel='stylesheet' id='responsive-lightbox-swipebox-css'  href='../../karneliuk/swipebox.min.2.2.2.css' type='text/css' media='all' />
<link rel='stylesheet' id='alia-style-css'  href='../../karneliuk/alia.style.1.35.css' type='text/css' media='all' />
<link rel='stylesheet' id='fontawesome-css'  href='../../karneliuk/all.min.1.0.css' type='text/css' media='all' />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel='stylesheet' id='codecolorer-css'  href='../../karneliuk/codecolorer.0.9.16.css' type='text/css' media='screen' />
<link rel="stylesheet" href="../../css/style1.css" />
<link rel='https://api.w.org/' href='../../karneliuk/wp-json' />


<script type='text/javascript' src='../../karneliuk/jquery-1.12.4-wp.js' class="local-root-js"></script>
<script type='text/javascript' src='../../karneliuk/jquery-migrate.min-1.4.1.js' class="local-root-js"></script>
<script type='text/javascript' src='../../karneliuk/ouibounce-5.3.2.js' class="local-root-js"></script>


<meta name="generator" content="WordPress 5.3.2" />

</head>

<body class="home blog sticky_header header_logo_rounded text_posts_unbordered masonry_effect_enabled show_menu_circle_idicator sliding_sidebar_inactive">

<div id="page" class="site">

  <div class="site_main_container">

    <header class="site_header">
      
    <div class="gray_header" style="background-image: url('img/Multivendor_pale.png');" >
      <div class="container site_header">
        <div class="header_square_logo">
          <style>.site_logo_image { width : 120px; }.site_logo_image { height : 120px; }</style>
          <a class="alia_logo retina_logo" title="basondole.io" href="index.html" rel="home">
            <img  width=120 height=120 src="../../img/all-baggy.jpg" class="site_logo img-responsive site_logo_image clearfix" alt="basondole.github.io" /></a>
    
          <a class="alia_logo default_logo  has_retina_logo" title="basondole.io" href="index.html" rel="home">
          <img  width=120 height=120 src="../../img/all-baggy.jpg" class="site_logo img-responsive site_logo_image clearfix" alt="basondole.github.io" /></a>

          <h1 class="screen-reader-text site_logo site-title clearfix">basondole.io</h1>

        </div>

        <div class="header_tagline">
          Network design, development and automation for enterprise, service provider and<br/> data center fabrics.
        </div>

        <div class="social_icons_list header_social_icons">
          <a rel="nofollow" target="" href="https://twitter.com/misterbigpaul" title="Twitter" class="social_icon widget_social_icon social_twitter social_icon_twitter"><i class="fa fa-twitter"></i></a>
          <a rel="nofollow" target="_blank" href="https://www.linkedin.com/in/paul-i-2b3013108" title="Linked In" class="social_icon widget_social_icon social_linkedin social_icon_linkedin"><i class="fa fa-linkedin"></i></a>
          <a rel="nofollow" target="_blank" href="https://github.com/basondole" title="Github" class="social_icon widget_social_icon social_github social_icon_github"><i class="fa fa-github"></i></a>
          <a rel="nofollow" target="_blank" href="https://stackoverflow.com/users/12078639/bassosimons" title="stackoverflow" class="social_icon widget_social_icon"><i class="fa fa-rss"></i></a>

        </div>
      </div>
    </div>
        
    <div class="header_nav_wrapper">

      <div class="header_nav">

        <div class="container">
          <div class="site_branding">
          <h1 class="text_logo"><a href="../../index.html" rel="home">basondole.io<span class="logo_dot"></span></a></h1>
          </div>
          

          <!-- Place header control before main menu if site title is enabled -->
          <div class="header_controls">

            <div class="header_sliding_sidebar_control header_control_wrapper">
              <a id="user_control_icon" class="sliding_sidebar_button" href="#">
                <i class="fa fa-bars header_control_icon"></i>
              </a>
            </div>
        
          </div>
    

          <div class="main_menu">
            <ul id="top-menu" class="navbar">
              <li id="menu-item-318" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-318 default_menu"><a href="index.html" class="local-root-page">Home</a></li>
              
              <li id="menu-item-320" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-320 dropdown default_menu current-menu-item current_page_item active"><a href="../../blog.html" data-hover="dropdown" class="dropdown-toggle" class="local-root-page">Blog</a>
                <!-- <ul role="menu" class=" dropdown-menu">
                  <li id="menu-item-424" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-424 default_menu"><a href="index.html">Collaboration</a></li>
                  <li id="menu-item-3124" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3124 default_menu"><a href="../networkauto/index.html">Network Automation</a></li>
                  <li id="menu-item-425" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-425 default_menu"><a href="">Tools</a></li>
                  <li id="menu-item-425" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-425 default_menu"><a href="index.html">Misc</a></li>
                </ul> -->
              </li>
              <li id="menu-item-2056" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2056 default_menu"><a href="bgp.html" class="local-root-page">BGP</a></li>
              <li id="menu-item-413" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-413 default_menu"><a href="about.html" class="local-root-page">About</a></li>
              
              
            </ul>
            <span class="menu_mark_circle hidden_mark_circle"></span>
          </div>
              
        <!-- Place header control after main menu if site title is enabled -->
          
        </div><!-- end .container -->
      </div><!-- end .header_nav -->
    </div><!-- end .header_nav_wrapper -->
    </header>

    <main id="content" class="site-content">
      <section id="primary" class="container main_content_area">
        <!-- end check for post layout -->
        <div class="row full_width_page_single no_sidebar_post_single">
          <div>
            <article id="post-182" class="blog_page_container post-182 page type-page status-publish">

              <div class="page_body">
                    <div class="post_info_wrapper">
                      <div class="entry-content blog_page_text blog_page_description">



<!-- ============================ START CONTENT ============================================ -->
<h2 style="text-align: center;">
  <strong>SRv6</strong>
</h2>

<p>
The major difference between SR/MPLS and SRv6 is that the SID in SR/MPLS is MPLS label where as SID in SRv6 is encoded as a native IPv6 address.
SRv6 solution completely deletes the MPLS data plane, services are encapsulated in native ipv6 addresses.
</p><p>
While nodes terminating the servies require SRv6 support, the intermediate nodes only require native IPv6 support. No need to change anything on the intermediate nodes.
Segment routing (SR) uses an IGP to advertise topology, prefix, locator, and SID information. ISIS uses the extension, SRv6 Locator TLV which Advertises an SRv6 locator and the End SIDs associated with it.
</p><p>
After receiving the TLV, SRv6-capable IS-IS devices install corresponding locator route entries to their local forwarding tables, but SRv6-incapable IS-IS devices do not.
SRv6 locators can also be advertised using the Prefix Reachability TLV 236 or 237. In this advertisement mode, SRv6-incapable devices can install corresponding locator route entries to their local forwarding tables, thereby achieving interworking with SRv6-capable devices.
However, IGP for SR does not work if paths cross multiple ASs on a large-scale network. BGP for SRv6 is an extension of BGP for Segment Routing.
</p>

<h3>SRv6 encapsulation</h3>

<h4>Best Effort Forwarding</h4>
This implementation takes advantage of the native IPv6 address.

<pre>
		   SR/MPLS                 SRv6

	___ +-----------+     ---  +-------------+
	 |  | SR LABEL  |     40B  | IPv6 HEADER |
	 8B +-----------+     ---  +-------------+
	 |  | VPN LABEL |          |   PAYLOAD   |
	--- +-----------+          +-------------+
	    |  PAYLOAD  |
	    +-----------+
</pre>

<h4>Traffic engineering forwarding</h4>

TE requires the use of the Segment Routing header, SRH, this is an extension header added to IPv6 packets to implement Segment Routing IPv6 (SRv6) based on the IPv6 forwarding plane. It specifies an IPv6 explicit path and stores IPv6 segment lists that function in the same way as segment lists in SR-MPLS.
The fields in SRH are 8 bytes in total nevertheless in additional to that is 16 bytes for each IPv6 added in the segment list field of the SRH.

<pre>
		   SR-MPLS                     SRv6

	___ +--------------+     ---  +-------------+
	 |  | SR LABEL * 3 |     40B  | IPv6 HEADER |
	16B +--------------+     ---  +-------------+
	 |  |   VPN LABEL  |     56B  |SRH IPV6 * 3 |
	--- +--------------+     ---  +-------------+
	    |    PAYLOAD   |	      |   PAYLOAD   |
	    +--------------+	      +-------------+
</pre>

<blockquote>SRv6 does have more overhead than traditional SR/MPLS
</blockquote>

<p>
For large packets, at least 1024 bytes, SRv6 encapsulation efficiency is not a concern with about 2% loss in efficiency fo BE forwarding. However for small packets 128 bytes or less encapsulation efficiency is not good, down by 30% compared to SR/MPLS
Nevertheless in backbone or mobile backhaul networks lare packets occupy more than 80% of overall traffic.
Small size packets are mostly upstream traffic which is usually much less than downstream.
The encapsulation overhead will not be the bottleneck for network throughput.
</p>

<h3>SRv6 Nodes</h3>
<ul>
	<li>Source SRv6 node: a source node that encapsulates packets into SRv6 packets</li>
	<li>Transit node: an IPv6 node that forwards SRv6 packets but does not perform SRv6 processing</li>
	<li>SRv6 segment endpoint node: a node that receives and processes SRv6 packets in which the destination IPv6 address is the node's local SID or local interface address</li>
</ul>
The SRv6 source node encapsulates packets into SRv6 packets, the transit node processes and forwards the packets as common IPv6 packets, and the endpoint nodes process SRv6 SIDs and SRHs in the packets.

<h3>SRv6 segments</h3>
SRv6 segments are identified using segment identifiers (SIDs) encoded as IPv6 addresses. An SRv6 SID consists of two parts: Locator and Function,  function. In general, each locator value must be unique in an SR domain.
example ipv6-prefix <code>fd12:3456:886a:1:6000:D40::/92</code>. The locator is advertised to other nodes via IGP.
<br/>
Each SRv6-capable node keeps a local SID table containing all SRv6 SIDs generated on the node
An SRv6 forwarding table (FIB) can be generated based on this table. There are a wide range of SRv6 SIDs associated with different functions.
<br/>
Behaviors performed by endpoint nodes are determined by instructions specified by SIDs. Such instructions include data packet forwarding, encapsulation, and decapsulation. They are called End series instructions because they are executed by SRv6 endpoints.

<pre>
Codename	Behaviour							Remark
End		Endpoint							SID that identifies a destination node, similar to a node SID in SR-MPLS
End.x		Endpoint w\ L3 cross-connect					SID that identifies a link, similar to an adjacency SID in SR-MPLS.
End.DT4		Endpoint w\ decapsulation + ipv4 table lookup			SID that identifies an IPv4 VPN instance, equivalent to per-VRF VPN label in L3VPNv4 scenarios
End.DT6		Endpoint w\ decapsulation + ipv6 table lookup			SID that identifies an IPv6 VPN instance, equivalent to per-VRF VPN label in L3VPNv6 scenarios
End.DT46	Endpoint w\ decapsulation + ipv4/6 table lookup			per-VRF VPN label
End.DX4		Endpoint w\ decapsulation + ipv4 cross-conect			SID that identifies an IPv4 CE, equivalent to per-CE VPN label in L3VPNv4 scenarios.
End.DX6		Endpoint w\ decapsulation + ipv6 cross-conect			SID that identifies an IPv6 CE, equivalent to per-CE VPN label in L3VPNv6 scenarios.
End.DX2		Endpoint w\ decapsulation + L2 cross-conect			Layer 2 cross-connect endpoint SID that identifies an endpoint, used in EVPN VPWS scenarios.
End.DX2L									If a bypass tunnel exists on the network, SID is generated automatically when a CE is dual-homed to PEs in EVPN VPWS scenarios.
End.DX2V	Endpoint w\ decapsulation + VLAN L2 table lookup
End.DT2U	Endpoint w\ decapsulation + unicast MAC L2 table lookup		Layer 2 cross-connect endpoint SID to which unicast MAC table lookup is bound, used in EVPN VPLS unicast scenarios.
End.DT2UL									Generated automatically. The SID can be used to send unicast traffic over the bypass tunnel when a CE is dual-homed to PEs in EVPN VPLS unicast scenarios.
End.DT2M	Endpoint w\ decapsulation + L2 table flooding			Layer 2 cross-connect endpoint SID to which broadcast-based flooding is bound, used in EVPN VPLS BUM scenarios.
End.OP										OAM SID that specifies the punt behavior to be implemented for OAM packets in ping and tracert scenarios.
</pre>


Flavors are behaviors defined to enhance the End series instructions.

<table>
<tr>
	<th>Flavor</th>	<th>Function Description</th>
</tr>
<tr>
	<td>PSP</td>	<td>Penultimate segment pop of the SRH (PSP). This function pops the SRH from a packet on the penultimate segment, improving forwarding efficiency. It is similar to penultimate hop popping (PHP) in MPLS.</td>
</tr>
	<td>USP</td>	<td>Ultimate segment pop of the SRH (USP). This function pops the SRH from a packet on the last segment.</td>
</tr>
</table>

<h3>Configuration</h3>
The demo is based on Huawei Software V1R19C00


<h4>L3VPNv4 over SRv6 BE</h4>

Uses SRv6 BE to encapsulate and transmit IPv4 VPN data packets.
VPN label are not required. VPN labels are replaced with SRv6 VPN SIDs that is, End.DT4 SID
An egress node identifies a VPN instance based on an SRv6 VPN SID and searches the IP routing table of the VPN instance.

<pre>

   [CE1]--------[PE1]--------[P]--------[PE2]--------[CE2]

                |<----------SRv6---------->|

</pre>

The configuration roadmap is as follows:
<ul>
<li>Enable IPv6 forwarding and configure an IPv6 address for each interface on PE1, the P, and PE2.</li>
<li>Enable IS-IS, configure an IS-IS level, and specify a network entity title (NET) on PE1, the P, and PE2.</li>
<li>Configure VPN instances on PE1 and PE2.</li>
<li>Establish an EBGP peer relationship between each PE and its connected CE.</li>
<li>Establish an MP-IBGP peer relationship between PEs.</li>
<li>Configure SRv6 on PE1 and PE2, and enable IS-IS SRv6.</li>
</ul>


<b>PE1 configuration</b>
<pre>
#
sysname PE1
#
ip vpn-instance vpna
 ipv4-family
  route-distinguisher 100:1
  vpn-target 111:1 export-extcommunity
  vpn-target 111:1 import-extcommunity
#               
segment-routing ipv6
 encapsulation source-address 2001:DB8:1::1
 locator as1 ipv6-prefix 2001:DB8:100:: 64 static 32
#               
isis 1          
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0001.00
 #              
 ipv6 enable topology ipv6
 segment-routing ipv6 locator as1
 #              
#               
interface Ethernet3/0/0
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:10::1/96
 isis ipv6 enable 1
#               
interface Ethernet3/0/2
 undo shutdown  
 ip binding vpn-instance vpna
 ip address 10.1.1.1 255.255.255.0
#               
interface LoopBack0
 ipv6 enable    
 ipv6 address 2001:DB8:1::1/128
 isis ipv6 enable 1
#               
bgp 100         
 router-id 1.1.1.1
 peer 2001:DB8:3::3 as-number 100
 peer 2001:DB8:3::3 connect-interface LoopBack0
 #              
 ipv4-family unicast
  undo synchronization
 #              
 ipv6-family unicast
  undo synchronization
 #              
 ipv4-family vpnv4
  policy vpn-target
  peer 2001:DB8:3::3 enable
  peer 2001:DB8:3::3 prefix-sid
 #              
 ipv4-family vpn-instance vpna
  import-route direct
  segment-routing ipv6 locator as1
  segment-routing ipv6 best-effort
  peer 10.1.1.2 as-number 65410
#               
return
</pre>

<b>P configuration file</b>
<pre>
#
sysname P        
#               
isis 1          
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0002.00
 #              
 ipv6 enable topology ipv6
 #
#               
interface Ethernet3/0/0
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:10::2/96
 isis ipv6 enable 1 
# 
interface Ethernet3/0/1
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:20::1/96
 isis ipv6 enable 1  
#               
interface LoopBack0
 ipv6 enable    
 ipv6 address 2001:DB8:2::2/128
 isis ipv6 enable 1
#               
return 
</pre>


<b>PE2 configuration file</b>
<pre>
#
sysname PE2
#
ip vpn-instance vpna
 ipv4-family
  route-distinguisher 200:1
  vpn-target 111:1 export-extcommunity
  vpn-target 111:1 import-extcommunity
#               
segment-routing ipv6
 encapsulation source-address 2001:DB8:3::3
 locator as1 ipv6-prefix 2001:DB8:300:: 64 static 32
#               
isis 1          
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0003.00
 #              
 ipv6 enable topology ipv6
 segment-routing ipv6 locator as1
 #              
#               
interface Ethernet3/0/1
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:20::2/96
 isis ipv6 enable 1
#               
interface Ethernet3/0/2
 undo shutdown  
 ip binding vpn-instance vpna
 ip address 10.2.1.1 255.255.255.0
#               
interface LoopBack0
 ipv6 enable    
 ipv6 address 2001:DB8:3::3/128
 isis ipv6 enable 1
#               
bgp 100         
 router-id 2.2.2.2
 peer 2001:DB8:1::1 as-number 100
 peer 2001:DB8:1::1 connect-interface LoopBack0
 #              
 ipv4-family unicast
  undo synchronization
 #              
 ipv6-family unicast
  undo synchronization
 #              
 ipv4-family vpnv4
  policy vpn-target
  peer 2001:DB8:1::1 enable
  peer 2001:DB8:1::1 prefix-sid
 #              
 ipv4-family vpn-instance vpna
  import-route direct
  segment-routing ipv6 locator as1
  segment-routing ipv6 best-effort
  peer 10.2.1.2 as-number 65420
#               
return
</pre>

<b>Verification</b>
<pre>
display isis peer
display isis route
display ip vpn-instance verbose
display bgp vpnv4 vpn-instance vpna peer
display bgp vpnv4 all peer
display segment-routing ipv6 locator verbose
display segment-routing ipv6 local-sid end-dt4 forwarding
display bgp vpnv4 all routing-table
display ip routing-table vpn-instance vpna
display ip routing-table vpn-instance vpna 22.22.22.22 verbose
</pre>


<b>CE1 configuration file</b>
<pre>
#
sysname CE1
#
interface GE0/0/2
 undo shutdown  
 ip address 10.1.1.2 255.255.255.0
#               
interface LoopBack1
 ip address 11.11.11.11 255.255.255.255
#               
bgp 65410       
 peer 10.1.1.1 as-number 100
 #              
 ipv4-family unicast
  undo synchronization
  network 11.11.11.11 255.255.255.255
  peer 10.1.1.1 enable
#               
return 
</pre>

<b>CE2 configuration file</b>
<pre>
#
sysname CE2
#
interface GE0/0/2
 undo shutdown
 ip address 10.2.1.2 255.255.255.0
#
interface LoopBack1
 ip address 22.22.22.22 255.255.255.255
#
bgp 65420
 peer 10.2.1.1 as-number 100
 ipv4-family unicast
  undo synchronization
  network 22.22.22.22 255.255.255.255
  peer 10.2.1.1 enable
#
return
</pre>





<h4>EVPN L3VPNv4 over SRv6 BE</h4>

Ethernet virtual private network (EVPN) L3VPNv4 over SRv6 BE, uses EVPN address family instead of VPNv4.
After learning the IPv4 route advertised by CEs, PEs installs the route in its VPNv4 routing table and converts it into a type 5 EVPN route (IP prefix route).
Each PE advertises the EVPN route to its respective BGP EVPN peer through update messages carrying RT and SRv6 VPN SID attributes, that is, End.DT4 SID

<pre>

   [SITE1]----[CE1]-----[PE1]------[P]----[PE2]----[CE2]-----[SITE2]

</pre>

The configuration roadmap is as follows:
<br/>  - Enable IPv6 forwarding and configure an IPv6 address for each interface on PE1, the P, and PE2.
<br/>  - Enable IS-IS, configure an IS-IS level, and specify a network entity title (NET) on PE1, the P, and PE2.
<br/>  - Configure an IPv4 L3VPN instance on each PE and bind the IPv4 L3VPN instance to an access-side interface.
<br/>  - Establish an EBGP peer relationship between each PE and its connected CE.
<br/>  - Establish a BGP EVPN peer relationship between PEs.
<br/>  - Configure SRv6 BE on PEs, and enable IS-IS SRv6
<br/>
<b>PE1 configuration file</b>
<pre>
#
sysname PE1
#
ip vpn-instance vpn1
 ipv4-family
  route-distinguisher 100:1
  vpn-target 1:1 export-extcommunity evpn
  vpn-target 1:1 import-extcommunity evpn
#
segment-routing ipv6
 encapsulation source-address 2001:DB8:1::1
 locator PE1 ipv6-prefix 2001:DB8:100:: 64 static 32
 opcode ::100 end-dt4 vpn-instance vpn1 evpn
#
isis 1
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0001.00
 #
 ipv6 enable topology ipv6
 segment-routing ipv6 locator PE1
 #
#
interface GigabitEthernet1/0/0
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:10::1/64
 isis ipv6 enable 1
#
interface GigabitEthernet2/0/0
 undo shutdown
 ip binding vpn-instance vpn1
 ip address 10.1.1.1 255.255.255.0
#
interface LoopBack1
 ipv6 enable
 ipv6 address 2001:DB8:1::1/128
 isis ipv6 enable 1
#
bgp 100
 router-id 1.1.1.1
 peer 2001:DB8:3::3 as-number 100
 peer 2001:DB8:3::3 connect-interface LoopBack1
 #
 ipv4-family unicast
  undo synchronization
 #
 ipv4-family vpn-instance vpn1
  import-route direct
  advertise l2vpn evpn
  segment-routing ipv6 locator PE1 evpn
  segment-routing ipv6 best-effort evpn
  peer 10.1.1.2 as-number 65410
 #
 l2vpn-family evpn
  undo policy vpn-target
  peer 2001:DB8:3::3 enable
  peer 2001:DB8:3::3 advertise encap-type srv6
#
return
</pre>

<b>P configuration file</b>
<pre>
#
sysname P
#
isis 1
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0002.00
 #
 ipv6 enable topology ipv6
#
interface GigabitEthernet1/0/0
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:10::2/64
 isis ipv6 enable 1
#
interface GigabitEthernet2/0/0
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:20::1/64
 isis ipv6 enable 1
#
interface LoopBack1
 ipv6 enable
 ipv6 address 2001:DB8:2::2/128
 isis ipv6 enable 1
#
return
</pre>

<b>PE2 configuration file</b>
<pre>
#
sysname PE2
#
ip vpn-instance vpn1
 ipv4-family
  route-distinguisher 200:1
  vpn-target 1:1 export-extcommunity evpn
  vpn-target 1:1 import-extcommunity evpn
#
segment-routing ipv6
 encapsulation source-address 2001:DB8:3::3
 locator PE2 ipv6-prefix 2001:DB8:130:: 64 static 32
 opcode ::200 end-dt4 vpn-instance vpn1 evpn
#
isis 1
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0003.00
 #
 ipv6 enable topology ipv6
 segment-routing ipv6 locator PE2
 #
#
interface GigabitEthernet1/0/0
 undo shutdown  
 ipv6 enable
 ipv6 address 2001:DB8:20::2/64
 isis ipv6 enable 1
#
interface GigabitEthernet2/0/0
 undo shutdown
 ip binding vpn-instance vpn1
 ip address 10.2.1.1 255.255.255.0
#
interface LoopBack1
 ipv6 enable
 ipv6 address 2001:DB8:3::3/128
 isis ipv6 enable 1
#
bgp 100
 router-id 3.3.3.3
 peer 2001:DB8:1::1 as-number 100
 peer 2001:DB8:1::1 connect-interface LoopBack1
 #
 ipv4-family unicast
  undo synchronization
 #
 ipv4-family vpn-instance vpn1
  import-route direct
  advertise l2vpn evpn
  segment-routing ipv6 locator PE2 evpn
  segment-routing ipv6 best-effort evpn
  peer 10.2.1.2 as-number 65420
 #
 l2vpn-family evpn
  undo policy vpn-target
  peer 2001:DB8:1::1 enable
  peer 2001:DB8:1::1 advertise encap-type srv6
#
return
</pre>

<b>CE1 configuration file</b>
<pre>
#
sysname CE1
#
interface GigabitEthernet1/0/0
 undo shutdown  
 ip address 10.1.1.2 255.255.255.0
#               
interface LoopBack1
 ip address 11.11.11.11 255.255.255.255
#               
bgp 65410       
 peer 10.1.1.1 as-number 100
 #              
 ipv4-family unicast
  undo synchronization
  network 11.11.11.11 255.255.255.255
  peer 10.1.1.1 enable
#               
return 
<pre>

<b>CE2 configuration file</b>
<pre>
#
sysname CE2
#
interface GigabitEthernet1/0/0
 undo shutdown
 ip address 10.2.1.2 255.255.255.0
#
interface LoopBack1
 ip address 22.22.22.22 255.255.255.255
#
bgp 65420
 peer 10.2.1.1 as-number 100
#
 ipv4-family unicast
  undo synchronization
  network 22.22.22.22 255.255.255.255
  peer 10.2.1.1 enable
#
return
</pre>

<b>Verficaton</b>
<pre>
display bgp evpn peer
display bgp evpn all routing-table prefix-route
display ip routing-table vpn-instance vpn1
display segment-routing ipv6 local-sid end-dt4 forwarding
</pre>


<h4>EVPN L3VPNv6 over SRv6 BE</h4>

Ethernet virtual private network (EVPN) L3VPNv6 over SRv6 BE, uses EVPN address family instead of VPNv6.
After learning the IPv6 route advertised by CEs, PEs installs the route in its VPNv6 routing table and converts it into a type 5 EVPN route (IP prefix route).
Each PE advertises the EVPN route to its respective BGP EVPN peer through update messages carrying RT and SRv6 VPN SID attributes, that is, End.DT6 SID

<pre>

   [SITE1]----[PE1]-----[P]----[PE2]-------[SITE2]

                |<-----SRv6---->|
</pre>

The configuration roadmap is as follows:
<br/>  - Enable IPv6 forwarding and configure an IPv6 address for each interface on PE1, the P, and PE2.
<br/>  - Enable IS-IS, configure an IS-IS level, and specify a network entity title (NET) on PE1, the P, and PE2.
<br/>  - Configure an IPv6 L3VPN instance on each PE and bind the IPv6 L3VPN instance to an access-side interface.
<br/>  - Establish a BGP EVPN peer relationship between PEs.
<br/>  - Configure SRv6 BE on PEs, and enable IS-IS SRv6.
<br/>

<b>PE1 configuration file</b>
<pre>
#
sysname PE1
#
ip vpn-instance vpn1
 ipv6-family
  route-distinguisher 100:1
  apply-label per-instance
  vpn-target 1:1 export-extcommunity evpn
  vpn-target 1:1 import-extcommunity evpn
#
segment-routing ipv6
 encapsulation source-address 2001:DB8:1::1
 locator PE1 ipv6-prefix 2001:DB8:100:: 64 static 32
#
isis 1
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0001.00
 #
 ipv6 enable topology ipv6
 segment-routing ipv6 locator PE1
 #
#
interface GigabitEthernet1/0/0
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:10::1/64
 isis ipv6 enable 1
#
interface GigabitEthernet2/0/0
 undo shutdown
 ip binding vpn-instance vpn1
 ipv6 enable
 ipv6 address 2001:DB8:11::1/64
#
interface LoopBack1
 ipv6 enable
 ipv6 address 2001:DB8:1::1/128
 isis ipv6 enable 1
#
bgp 100
 router-id 1.1.1.1
 peer 2001:DB8:3::3 as-number 100
 peer 2001:DB8:3::3 connect-interface LoopBack1
 #
 ipv4-family unicast
  undo synchronization
 #
 ipv6-family vpn-instance vpn1
  import-route direct
  advertise l2vpn evpn
  segment-routing ipv6 locator PE1 evpn
  segment-routing ipv6 best-effort evpn
 #
 l2vpn-family evpn
  undo policy vpn-target
  peer 2001:DB8:3::3 enable
  peer 2001:DB8:3::3 advertise encap-type srv6
#
return
</pre>

<b>P configuration file</b>
<pre>
#
sysname P
#
isis 1
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0002.00
 #
 ipv6 enable topology ipv6
#
interface GigabitEthernet1/0/0
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:10::2/64
 isis ipv6 enable 1
#
interface GigabitEthernet2/0/0
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:20::1/64
 isis ipv6 enable 1
#
interface LoopBack1
 ipv6 enable
 ipv6 address 2001:DB8:2::2/128
 isis ipv6 enable 1
#
return
</pre>

<b>PE2 configuration file</b>
<pre>
#
sysname PE2
#
ip vpn-instance vpn1
 ipv6-family
  route-distinguisher 200:1
  apply-label per-instance
  vpn-target 1:1 export-extcommunity evpn
  vpn-target 1:1 import-extcommunity evpn
#
segment-routing ipv6
 encapsulation source-address 2001:DB8:3::3
 locator PE2 ipv6-prefix 2001:DB8:130:: 64 static 32
#
isis 1
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0003.00
 #
 ipv6 enable topology ipv6
 segment-routing ipv6 locator PE2
 #
#
interface GigabitEthernet1/0/0
 undo shutdown  
 ipv6 enable
 ipv6 address 2001:DB8:20::2/64
 isis ipv6 enable 1
#
interface GigabitEthernet2/0/0
 undo shutdown
 ip binding vpn-instance vpn1
 ipv6 enable
 ipv6 address 2001:DB8:22::1/64
#
interface LoopBack1
 ipv6 enable
 ipv6 address 2001:DB8:3::3/128
 isis ipv6 enable 1
#
bgp 100
 router-id 3.3.3.3
 peer 2001:DB8:1::1 as-number 100
 peer 2001:DB8:1::1 connect-interface LoopBack1
 #
 ipv4-family unicast
  undo synchronization
 #
 ipv6-family vpn-instance vpn1
  import-route direct
  advertise l2vpn evpn
  segment-routing ipv6 locator PE2 evpn
  segment-routing ipv6 best-effort evpn
 #
 l2vpn-family evpn
  undo policy vpn-target
  peer 2001:DB8:1::1 enable
  peer 2001:DB8:1::1 advertise encap-type srv6
#
return
</pre>

<b>Verification</b>
<pre>
display bgp evpn all routing-table prefix-route
display ipv6 routing-table vpn-instance vpn1
display segment-routing ipv6 local-sid end-dt6 forwarding
</pre>


<h4>EVPN VPWS over SRv6 BE</h4>

EVPN virtual private wire service (VPWS) uses SRv6 BE over a backbone network to simplify EVPN VPWS — a technology that provides a P2P L2VPN service based on the EVPN service architecture.
This solution allows Layer 2 packets to be forwarded along access circuit (AC) connections without the need to search for MAC forwarding entries.

<pre>

   [SITE1]-----[PE1]------[P]-----[PE2]------[SITE2]

                |<-------SRv6------>|

The configuration roadmap is as follows:
<br/>  - Enable IPv6 forwarding and configure an IPv6 address for each interface on PE1, the P, and PE2.
<br/>  - Enable IS-IS, configure an IS-IS level, and specify a network entity title (NET) on PE1, the P, and PE2.
<br/>  - Configure EVPN VPWS and EVPL instances on each PE and bind the EVPL instance to an access-side sub-interface.
<br/>  - Establish a BGP EVPN peer relationship between PEs.
<br/>  - Configure SRv6 BE on PEs.
<br/>

<b>PE1 configuration file</b>
<pre>
#
sysname PE1
#
evpn vpn-instance evrf1 vpws
 route-distinguisher 100:1
 segment-routing ipv6 best-effort
 vpn-target 1:1 export-extcommunity
 vpn-target 1:1 import-extcommunity
#
evpl instance 1 srv6-mode
 evpn binding vpn-instance evrf1
 local-service-id 100 remote-service-id 200
 segment-routing ipv6 locator PE1 
#
segment-routing ipv6
 encapsulation source-address 2001:DB8:1::1
 locator PE1 ipv6-prefix 2001:DB8:11:: 64 static 32
#
isis 1
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0001.00
 #
 ipv6 enable topology ipv6
 segment-routing ipv6 locator PE1
#
interface GigabitEthernet1/0/0
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:10::1/64
 isis ipv6 enable 1
#
interface GigabitEthernet2/0/0.1 mode l2
 encapsulation dot1q vid 1
 evpl instance 1
#
interface LoopBack1
 ipv6 enable
 ip address 1.1.1.1 255.255.255.255
 ipv6 address 2001:DB8:1::1/128
 isis ipv6 enable 1
#
bgp 100
 router-id 1.1.1.1
 peer 2001:DB8:3::3 as-number 100
 peer 2001:DB8:3::3 connect-interface LoopBack1
 #
 ipv4-family unicast
  undo synchronization
 #              
 l2vpn-family evpn
  undo policy vpn-target
  peer 2001:DB8:3::3 enable
  peer 2001:DB8:3::3 advertise encap-type srv6
#
evpn source-address 1.1.1.1
#
return
</pre>

<b>P configuration file</b>
<pre>
#
sysname P
#
isis 1
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0002.00
 #
 ipv6 enable topology ipv6
#
interface GigabitEthernet1/0/0
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:10::2/64
 isis ipv6 enable 1
#
interface GigabitEthernet2/0/0
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:20::1/64
 isis ipv6 enable 1
#
interface LoopBack1
 ipv6 enable
 ipv6 address 2001:DB8:2::2/128
 isis ipv6 enable 1
#
return
</pre>

<b>PE2 configuration file</b>
<pre>
#
sysname PE2
#
evpn vpn-instance evrf1 vpws
 route-distinguisher 200:1
 segment-routing ipv6 best-effort
 vpn-target 1:1 export-extcommunity
 vpn-target 1:1 import-extcommunity
#
evpl instance 1 srv6-mode
 evpn binding vpn-instance evrf1
 local-service-id 200 remote-service-id 100
 segment-routing ipv6 locator PE2 
#
segment-routing ipv6
 encapsulation source-address 2001:DB8:3::3
 locator PE2 ipv6-prefix 2001:DB8:30:: 64 static 32
#
isis 1
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0003.00
 #
 ipv6 enable topology ipv6
 segment-routing ipv6 locator PE2
#
interface GigabitEthernet1/0/0
 undo shutdown
 ipv6 enable
 ipv6 address 2001:DB8:20::2/64
 isis ipv6 enable 1
#
interface GigabitEthernet2/0/0.1 mode l2
 encapsulation dot1q vid 1
 evpl instance 1
#
interface LoopBack1
 ipv6 enable
 ip address 3.3.3.3 255.255.255.255
 ipv6 address 2001:DB8:3::3/128
 isis ipv6 enable 1
#
bgp 100
 router-id 3.3.3.3
 peer 2001:DB8:1::1 as-number 100
 peer 2001:DB8:1::1 connect-interface LoopBack1
 #
 ipv4-family unicast
  undo synchronization
 #              
 l2vpn-family evpn
  undo policy vpn-target
  peer 2001:DB8:1::1 enable
  peer 2001:DB8:1::1 advertise encap-type srv6
#
evpn source-address 3.3.3.3
#
return
</pre>

<b>Verification</b>
<pre>
display segment-routing ipv6 local-sid end-dx2 forwarding
display bgp evpn peer
display bgp evpn evpl
display bgp evpn evpl instance-id 1
display bgp evpn all routing-table
display bgp evpn all routing-table ad-route 0000.0000.0000.0000.0000:200 
</pre>
 

<h4>EVPN VPLS over SRv6 BE</h4>

EVPN VPLS uses the EVPN E-LAN model to carry MP2MP VPLS services.

<pre>

   [SITE1]-----[PE1]----[P]----[PE2]------[SITE2]

                |<-----SRv6----->|
</pre>

The configuration roadmap is as follows:
<br/>  - Enable IPv6 forwarding and configure an IPv6 address for each interface on PE1, the P, and PE2.
<br/>  - Enable IS-IS, configure an IS-IS level, and specify a network entity title (NET) on PE1, the P, and PE2.
<br/>  - Configure an EVPN instance in BD mode on each PE and bind the EVPN instance to an access-side sub-interface.
<br/>  - Establish a BGP EVPN peer relationship between PEs.
<br/>  - Configure SRv6 BE on PEs.
<br/>

<b>PE1 configuration file</b>
<pre>
#
sysname PE1
#
evpn vpn-instance evrf1 bd-mode
 route-distinguisher 100:1
 segment-routing ipv6 best-effort
 segment-routing ipv6 locator PE1_ARG unicast-locator PE1 
 vpn-target 1:1 export-extcommunity
 vpn-target 1:1 import-extcommunity
#
bridge-domain 100
 evpn binding vpn-instance evrf1
#               
segment-routing ipv6
 encapsulation source-address 2001:db8:1::1
 locator PE1 ipv6-prefix 2001:DB8:11:: 64
 locator PE1_ARG ipv6-prefix 2001:DB8:12:: 64 args 10
#               
isis 1          
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0001.00
 #              
 ipv6 enable topology ipv6
 segment-routing ipv6 locator PE1
 segment-routing ipv6 locator PE1_ARG auto-sid-disable
 #              
# 
interface GigabitEthernet1/0/0
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:10::1/64
 isis ipv6 enable 1
#
interface GigabitEthernet2/0/0
 undo shutdown
#
interface GigabitEthernet2/0/0.1 mode l2
 encapsulation dot1q vid 1
 rewrite pop single
 bridge-domain 100
#
interface LoopBack1
 ipv6 enable    
 ip address 1.1.1.1 255.255.255.255
 ipv6 address 2001:DB8:1::1/128
 isis ipv6 enable 1
#               
bgp 100         
 router-id 1.1.1.1
 peer 2001:DB8:3::3 as-number 100
 peer 2001:DB8:3::3 connect-interface LoopBack1
 #              
 ipv4-family unicast
  undo synchronization
 #              
 l2vpn-family evpn
  policy vpn-target
  peer 2001:DB8:3::3 enable
  peer 2001:DB8:3::3 advertise encap-type srv6
#
evpn source-address 1.1.1.1
#
return
</pre>

<b>P configuration file</b>
<pre>
#
sysname P
#               
isis 1          
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0002.00
 #              
 ipv6 enable topology ipv6
 #              
#
interface GigabitEthernet1/0/0
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:10::2/64
 isis ipv6 enable 1
#
interface GigabitEthernet2/0/0
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:20::1/64
 isis ipv6 enable 1
#
interface LoopBack1
 ipv6 enable    
 ip address 2.2.2.2 255.255.255.255
 ipv6 address 2001:DB8:2::2/128
 isis ipv6 enable 1
#
return
</pre>

<b>PE2 configuration file</b>
<pre>
#
sysname PE2
#
evpn vpn-instance evrf1 bd-mode
 route-distinguisher 100:1
 segment-routing ipv6 best-effort
 segment-routing ipv6 locator PE2_ARG unicast-locator PE2 
 vpn-target 1:1 export-extcommunity
 vpn-target 1:1 import-extcommunity
#
bridge-domain 100
 evpn binding vpn-instance evrf1
#               
segment-routing ipv6
 encapsulation source-address 2001:db8:3::3
 locator PE2 ipv6-prefix 2001:DB8:21:: 64
 locator PE2_ARG ipv6-prefix 2001:DB8:22:: 64 args 10
#               
isis 1          
 is-level level-1
 cost-style wide
 network-entity 10.0000.0000.0003.00
 #              
 ipv6 enable topology ipv6
 segment-routing ipv6 locator PE2
 segment-routing ipv6 locator PE2_ARG auto-sid-disable
 #              
# 
interface GigabitEthernet1/0/0
 undo shutdown  
 ipv6 enable    
 ipv6 address 2001:DB8:20::2/64
 isis ipv6 enable 1
#
interface GigabitEthernet2/0/0
 undo shutdown
#
interface GigabitEthernet2/0/0.1 mode l2
 encapsulation dot1q vid 1
 rewrite pop single
 bridge-domain 100
#
interface LoopBack1
 ipv6 enable    
 ip address 3.3.3.3 255.255.255.255
 ipv6 address 2001:DB8:3::3/128
 isis ipv6 enable 1
#               
bgp 100         
 router-id 3.3.3.3
 peer 2001:DB8:1::1 as-number 100
 peer 2001:DB8:1::1 connect-interface LoopBack1
 #              
 ipv4-family unicast
  undo synchronization
 #              
 l2vpn-family evpn
  policy vpn-target
  peer 2001:DB8:1::1 enable
  peer 2001:DB8:1::1 advertise encap-type srv6
# 
evpn source-address 3.3.3.3
#
return
</pre>

<b>Verification</b>
<pre>
display segment-routing ipv6 local-sid end-dt2m forwarding
display segment-routing ipv6 local-sid end-dt2u forwarding
display bgp evpn all routing-table
</pre>



                      </div>
                    </div>
                    <!-- end post_info_wrapper -->
                  </div>
                  <!-- end post_body -->

                </article>

<!-- ============================ END CONTENT ============================================ -->

                <div class="author_info_container author_single_box">
                  <div class="row">
                    <div class="author_avatar_col col">
                      <a class="author_avatar_url" href="about"><img alt='' src='../../img/all-baggy.jpg' srcset='../../img/all-baggy.jpg' class='avatar avatar-150 photo' height='150' width='150' /></a>
                    </div>
                    <div class="author_info_col col">
                      <div class="author_box_info_header">
                        <h2 class="author_display_name title">
                          <a class="author_name_url url fn n" href="">Paul S.I. Basondole </a>
                        </h2>

                      </div>
                      <div class="author_description">
IT &amp; Network Expert / Lead <br>
Network & Automation designer; <br>
2x JNCIP (RS/SP) 1x CCNP (RS) <br>
BSc Telecommunications Eng.
                      </div>
                      <div class="stories_circles_wrapper"></div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- close col12 just inside .full_width_list -->
            </div>
            <!-- close .full_width_list -->
            <!-- close col and row in case of sidebar layout -->
            <!-- end check for post layout -->
          </section>
          <!-- #primary -->
        </main>
        <!-- #content -->
        <footer id="colophon" class="site_footer container" role="contentinfo">
          <div class="footer_credits footers_active_sidebars_0">
            &copy; 2019 basondole.io
          </div>
          <div id="aliagototop" title="Scroll To Top" class="alia_gototop_button footer_button">
            <i class="fa fa-arrow-up"></i>
          </div>
        </footer>

        <!-- #colophon -->
      </div>
      <!-- .site_main_container -->
      <!-- start sliding sidebar content -->
     <!-- .site_main_container -->
      <!-- start sliding sidebar content -->
      <div class="sliding_close_helper_overlay"></div>
      <div class="site_side_container">
        <h3 class="screen-reader-text">
          Sliding Sidebar
        </h3>
        <div class="info_sidebar">
          <div class="top_header_items_holder mobile_menu_opened">
            <div class="main_menu">
              <ul id="mobile-menu" class="navbar">
                <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-318 default_menu">
                  <a href="index.html" class="local-root-page">Home</a>
                </li>
                <li id="menu-item-2056" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2056 default_menu">
                  <a href="blog.html" data-hover="dropdown" class="dropdown-toggle" class="local-root-page">Blog</a>
                  
                </li>
                <li id="menu-item-2056" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2056 default_menu"><a href="bgp.html" class="local-root-page">BGP</a></li>
                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-413 default_menu current-menu-item current_page_item active">
                  <a href="about.html" class="local-root-page">About</a>
                </li>
                
                
                </li>
              </ul>
            </div>
          </div>
          <!-- end .top_header_items_holder -->
        </div>
      </div>
      <!-- end sliding sidebar content -->
      <!-- start footer static content -->
      <!-- start footer static content -->
    </div>
    <!-- #page -->
    <div id="ajax_modal_story" class="ajax_modal ajax_modal_story modal enable_rotate">
      <div class="story_modal_overlay_helper"></div>
    </div>


    </script>

    <script type='text/javascript' src='../../karneliuk/global.1.35.js' class="local-root-js"></script>


    <script type='text/javascript'>
/* <![CDATA[ */
var alia_core_vars = { "ajax_load_story": "http:\/\/karneliuk.com\/wp-content\/plugins\/alia-core\/ajax-load-story.php", "ajax_rotate_story": "http:\/\/karneliuk.com\/wp-content\/plugins\/alia-core\/ajax-rotate-story.php" };
/* ]]> */
    </script>


    <script type='text/javascript' src='../../karneliuk/alia-core.1.13.js' class="local-root-js"></script>
    <script type='text/javascript' src='../../karneliuk/wp-embed.min.5.3.2.js' class="local-root-js"></script>

    
<script type="text/javascript">
  // edit the level variable, the load the page and copy the loaded DOM, NOT the source
  // to get updated paths throughout the dom
  
  var 
  localPagesFiles = document.getElementsByClassName("local-root-page"),
  localJsFiles = document.getElementsByClassName("local-root-js"),
  localCssFiles = document.getElementsByClassName("local-root-css"),
  localImagesFiles = document.getElementsByClassName("local-root-image");

  var level = "../../";

  function updatePaths() { 
    for (var i=0; i<localPagesFiles.length; i++) {
          var path = level + localPagesFiles[i].getAttribute("href");
          localPagesFiles[i].setAttribute("href",path);
          console.log(localPagesFiles[i].getAttribute("href"));
    }

    for (var i=0; i<localJsFiles.length; i++) {
          var path = level + localJsFiles[i].getAttribute("src");
          localJsFiles[i].setAttribute("src",path);
          console.log(localJsFiles[i].getAttribute("src"));
    }

    for (var i=0; i<localCssFiles.length; i++) {
          var path = level + localCssFiles[i].getAttribute("src");
          localCssFiles[i].setAttribute("src",path);
          // console.log(localJsFiles[i].getAttribute("src"));
    }

    for (var i=0; i<localImagesFiles.length; i++) {
          var path = level + localImagesFiles[i].getAttribute("src");
          localImagesFiles[i].setAttribute("src",path);
          // console.log(localJsFiles[i].getAttribute("src"));
    }
  }

  window.onload = function () {
   updatePaths();
  };

</script>

<script type="text/javascript">
  var localPagesFiles = document.getElementsByClassName("local-root-page");
function printId(event) {
  var myId = this.Id;
  console.log(myId);
}
for (var i=0; i<localPagesFiles.length; i++) {
       localPagesFiles[i].addEventListener("click",printId);
}
</script>




  </body>
</html>
